一级标题:ctrl+1

插入图片：ctrl+shift+i

插入代码块: ctrl+shift+k

分割线:---

加粗:ctrl+b	

无序列表: *+空格

有序列表:1.+空格

插入链接：[]()前面写内容【这是什么网址】，后面写网址

#define _CRT_SECURE_NO_WARNINGS 1
#pragma warning(disable:4996)
#pragma comment(lib, "winmm.lib")
#define MAXSIZE 1000//定义最大值为1000
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<easyx.h>
#include<graphics.h>
#include<conio.h>
#include<mmsystem.h>
#include<string>
typedef struct admin {
	char username[50];
	char password[50];
}admin;
typedef struct The_users   //typedef 可以定义结构体别名
{
	char id[11]; //账号 
	char pwd[20]; //密码 
}users;

/*创建储存用户账号密码的文件*/
void Create_File()
{
	FILE* fp;
	if ((fp = fopen("users.txt", "rb")) == NULL)                 /*如果此文件不存在*/
	{
		if ((fp = fopen("users.txt", "wb+")) == NULL)
		{
			printf("无法建立文件！\n");
			exit(0);
		}
	}

}

/*注册账号*/
users usersSion;
void registers()  //按结构体的大小，一次写入或者读入1个结构体大小
{
	users a, b;//结构体 The_users 重命名定义
	FILE* fp;

	char temp[50];
	char count[50];
	
	Sleep(1000);
	fp = fopen("users.txt", "r");
	fread(&b, sizeof(struct The_users), 1, fp); //读入一个结构体字符块 到b
	HWND window = GetHWnd();//获取当前的窗口，把这个窗口赋予到变量window上
	if (!fp) exit(-1);
	//fscanf(fp, "%s\t%s\t", usersSion.id, usersSion.pwd);
	char id[50];
	InputBox(id, 50, "欢迎来到注册界面，请输入账号", "账号输入");
	
	//char id[50];
	//InputBox(id, 50, "请输入账号", "账号输入");//弹出一个窗口，窗口名称是账号输入，上面显示的字是请输入账号，输入的最大长度是50，输入的东西存入adminname



	while (1)
	{
		if (strcmp(a.id, b.id)) /*如果两串不相等*/
		{
			if (!feof(fp))    /*如果未到文件尾*/


			{
				fread(&b, sizeof(struct The_users), 1, fp);
			}
			else
				break;
		}
		else
	
		{
			printf("此用户名已存在！请重新注册！\n");
			Sleep(1000);
			fclose(fp);
			return;
		}
	}
	char pwd[50];
	InputBox(a.pwd, 50, "请输入密码", "密码输入");
	pwd[49] = 0;
	InputBox(temp, 50, "请再次输入密码", "密码确认");
	temp[49] = 0;
	do {
		if (!strcmp(a.pwd, temp)) 
		{
			fp = fopen("users.txt", "a");
			fwrite(&a, sizeof(struct The_users), 1, fp);
			InputBox(count, 50, "账号注册成功，请登录", "注册成功");
			Sleep(500);
			fclose(fp);
			return;
		}
		else 
		{
			
			InputBox(a.pwd,50,"两次密码不匹配！请重新输入密码","密码输入");
			
			InputBox(temp,50,"请确认密码！","密码确认");
		}
	} while (1);
}

/*登录系统*/

void  Input_login()
{
	users a, b;//定义结构体The_users别名
	char count[50];
	FILE* fp;
	
	Sleep(1000);
	fp = fopen("users.txt", "r");
	
	HWND window = GetHWnd();
	if (!fp) exit(-1);
	//fscanf(fp, "%s\t%s\t", usersSion.id, usersSion.pwd);
	InputBox(a.id, 50, "欢迎来到登录界面，请输入账号");
	
	while (1)
	{
		
		if (strcmp(a.id, b.id) == 0)         //如果有此用户名
		{
			break;
		}
	
		else
		{
			if (!feof(fp))  //如果文件没有读完                            
	
			{
				fread(&b, sizeof(struct The_users), 1, fp);
			}
	
			else
			{
				
				InputBox(a.id, 50, "此用户名不存在，请重新输入！");
				Sleep(500);
				fclose(fp);
				//break;,,修好读入文件乱码错误后就可以删掉break
			}
		}
	}
	InputBox(a.pwd, 50, "请输入密码", "密码输入");
	do 
	{
	
		if (strcmp(a.pwd, b.pwd) == 0)            /*如果密码匹配*/
		{
			fclose(fp);
			
			InputBox(count, 50, "登录成功,欢迎使用!");
			Sleep(500);
			return;
		}
		else
		{
			InputBox(a.pwd, 50, "密码错误，请再次输入密码！", "再输入");
			
		}
	} while (strcmp(a.pwd, b.pwd) == 0);

}

void creatmenu();
admin adminsion;

//这是创造按钮的函数，不用管
void creatbutton(int left, int top, int right, int bottom, char ch[], int high, int wide, LPCTSTR word, COLORREF screen, COLORREF text)
{
	setfillcolor(screen);
	fillrectangle(left, top, right, bottom);
	settextcolor(text); settextstyle(high, wide, "楷体"); setbkmode(TRANSPARENT);
	int width = textwidth(ch);
	int height = textheight(ch);
	int x = (right - left) / 2 - width / 2;
	int y = (bottom - top) / 2 - height / 2;
	outtextxy(left + x, top + y, ch);
}
void adminlogin()
{
	FILE* fp = fopen("D:/admin.txt", "r");
	HWND window = GetHWnd();//获取当前的窗口，把这个窗口赋予到变量window上
	if (!fp) exit(-1);
	fscanf(fp, "%s\t%s\t", adminsion.username, adminsion.password);
	fclose(fp);
	//
	char adminname[50];
	InputBox(adminname, 50, "请输入账号", "账号输入");//弹出一个窗口，窗口名称是账号输入，上面显示的字是请输入账号，输入的最大长度是50，输入的东西存入adminname

	char adminpassword[50];
	InputBox(adminpassword, 50, "请输入密码", "密码输入");//同理
	
	if (strcmp(adminname, adminsion.username) == 0 && strcmp(adminsion.password, adminpassword) == 0)
	{
		cleardevice();//清屏操作，不用管
		//	creatwindow2();  这一句话是进入管理员管理系统的语句，不用管
	}
	else
	{
		MessageBox(window, "账号或密码错误", "错误", MB_OK);//弹出一个窗口，这个窗口在window上弹出，即不按确定按钮无法进行其他操作，窗口标题是错误，显示的字是账号或密码错误
		//如果错误就继续回到主页面
		creatmenu();
	}
}
void creatmenu()
{
	HWND menu = initgraph(1440, 810, SHOWCONSOLE);
	MOUSEMSG msg;
	IMAGE img;
	loadimage(&img, "./background.jpg", 1440, 810);
	putimage(0, 0, &img);
	char ch[] = "欢迎使用坤坤图书管理系统";
	creatbutton(196, 14, 1165, 173, ch, 60, 35, "黑体", RED, YELLOW);
	char ch1[] = "用户登录";
	creatbutton(200, 323, 630, 423, ch1, 50, 25, "楷体", BLUE, GREEN);
	char ch2[] = "注册用户";
	creatbutton(200, 560, 630, 660, ch2, 50, 25, "楷体", BLUE, GREEN);
	char ch3[] = "管理员登录";
	creatbutton(810, 323, 1240, 423, ch3, 50, 25, "楷体", BLUE, GREEN);
	char ch4[] = "找回密码";
	creatbutton(810, 560, 1240, 660, ch4, 50, 25, "楷体", BLUE, GREEN);
	char ch5[] = "测试进入";
	creatbutton(459, 695, 889, 795, ch5, 50, 25, "楷体", BLUE, GREEN);
	//	return menu;
	while (1)
	{
		if (MouseHit())
		{
			FlushMouseMsgBuffer();
			msg = GetMouseMsg();
			//这是用户登录
			//只需要把对应的函数加到if的括号里面就能实现了
			if (msg.x >= 200 && msg.x <= 630 && msg.y >= 323 && msg.y <= 423)
			{
				creatbutton(200, 323, 630, 423, ch1, 50, 25, "楷体", RED, GREEN);
				if (msg.mkLButton)
				{
					Input_login();
				}
			}
			//用户注册
			else if (msg.x >= 200 && msg.x <= 630 && msg.y >= 560 && msg.y <= 660)
			{
				creatbutton(200, 560, 630, 660, ch2, 50, 25, "楷体", RED, GREEN);
				if (msg.mkLButton)
				{
					registers();
				}
			}
			//管理员登录
			else if (msg.x >= 810 && msg.x <= 1240 && msg.y >= 323 && msg.y <= 423)
			{
				creatbutton(810, 323, 1240, 423, ch3, 50, 25, "楷体", RED, GREEN);
				if (msg.mkLButton)
				{

				}
			}
			//找回密码
			else if (msg.x >= 810 && msg.x <= 1240 && msg.y >= 560 && msg.y <= 660)
			{
				creatbutton(810, 560, 1240, 660, ch4, 50, 25, "楷体", RED, GREEN);
				if (msg.mkLButton)
				{
	
				}
			}
			//测试登录，这个不用管了
			else if (msg.x >= 459 && msg.x <= 889 && msg.y >= 695 && msg.y <= 795)
			{
				creatbutton(459, 695, 889, 795, ch5, 50, 25, "楷体", RED, GREEN);
				if (msg.mkLButton)
				{
					break;
				}
			}
			else
			{
				creatbutton(200, 323, 630, 423, ch1, 50, 25, "楷体", BLUE, GREEN);
				creatbutton(200, 560, 630, 660, ch2, 50, 25, "楷体", BLUE, GREEN);
				creatbutton(810, 323, 1240, 423, ch3, 50, 25, "楷体", BLUE, GREEN);
				creatbutton(810, 560, 1240, 660, ch4, 50, 25, "楷体", BLUE, GREEN);
				creatbutton(459, 695, 889, 795, ch5, 50, 25, "楷体", BLUE, GREEN);
			}
		}
		//		return menu;
	}
}
int main()
{
	creatmenu();
	return 0;
}